<div *ngIf="dashboardData" class="flex flex-col gap-6 w-full">
  <!-- Graph Section -->
  <div class="bg-white rounded-lg shadow p-4">
    <h2 class="text-lg font-semibold mb-4">{{ 'dashboard.company_board.balance_evolution' | transloco }}</h2>
    <ngx-charts-line-chart
      [view]="[600, 250]"
      [scheme]="'vivid'"
      [results]="chartData"
      [legend]="false"
      [xAxis]="true"
      [yAxis]="true"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      class="w-full"
      [xAxisLabel]="('dashboard.common.month' | transloco)"
      [yAxisLabel]="('dashboard.common.balance' | transloco) + ' (FCFA)'"
      [autoScale]="true">
    </ngx-charts-line-chart>
  </div>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.common.total_debit' | transloco }}</span>
      <span class="text-2xl font-bold text-red-600">{{ dashboardData.totalDebit | number:'1.0-0' }} FCFA</span>
    </div>
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.common.total_credit' | transloco }}</span>
      <span class="text-2xl font-bold text-green-600">{{ dashboardData.totalCredit | number:'1.0-0' }} FCFA</span>
    </div>
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.common.balance' | transloco }}</span>
      <span class="text-2xl font-bold text-blue-600">{{ dashboardData.balance | number:'1.0-0' }} FCFA</span>
    </div>
  </div>

  <!-- Key Stats -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.company_board.credit_count' | transloco }}</span>
      <span class="text-2xl font-bold text-green-600">{{ creditCount }}</span>
    </div>
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.company_board.debit_count' | transloco }}</span>
      <span class="text-2xl font-bold text-red-600">{{ debitCount }}</span>
    </div>
    <div class="bg-white rounded-lg shadow p-4 flex flex-col items-center">
      <span class="text-gray-500">{{ 'dashboard.company_board.avg_amount' | transloco }}</span>
      <span class="text-2xl font-bold">{{ avgTransaction | number:'1.0-0' }} FCFA</span>
    </div>
  </div>

  <!-- Statement Lines Table -->
  <div class="bg-white rounded-lg shadow p-4">
    <h2 class="text-lg font-semibold mb-4">{{ 'dashboard.company_board.statement_lines' | transloco }}</h2>
    <table class="min-w-full divide-y divide-gray-200">
      <thead>
        <tr>
          <th class="px-4 py-2 text-left">{{ 'dashboard.company_board.label' | transloco }}</th>
          <th class="px-4 py-2 text-left">{{ 'dashboard.common.counterparty' | transloco }}</th>
          <th class="px-4 py-2 text-left">{{ 'dashboard.company_board.date' | transloco }}</th>
          <th class="px-4 py-2 text-right">{{ 'dashboard.company_board.amount' | transloco }}</th>
          <th class="px-4 py-2 text-center">{{ 'dashboard.company_board.type' | transloco }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let line of dashboardData.lines">
          <td class="px-4 py-2">{{ line.label }}</td>
          <td class="px-4 py-2">{{ line.oppositeLabel }}</td>
          <td class="px-4 py-2">{{ line.date | date:'dd/MM/yyyy' }}</td>
          <td class="px-4 py-2 text-right" [ngClass]="{'text-red-600': line.type === 'DEBIT', 'text-green-600': line.type === 'CREDIT'}">
            {{ line.amount | number:'1.0-0' }} FCFA
          </td>
          <td class="px-4 py-2 text-center">
            <span [ngClass]="{'text-red-600': line.type === 'DEBIT', 'text-green-600': line.type === 'CREDIT'}">
              {{ line.type }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
